$skin-islands-arrow-height ?= 42px
$skin-islands-arrow-color  ?= #FFDB4C

unless ie
  stylobate_defaults('skin-islands-arrow', __helper '&:before')

skin-islands-arrow($this)
  $height = $this.units[0] or $skin-islands-arrow-height
  $color = $this.colors[0] or $skin-islands-arrow-color

  deprecate($this.params, 'tail')

  if $this.params.search
    padding: ($islands_xs - 1px) ($islands_m - 2px) ($islands_xs - 1px) ($islands_xs - 1px)
  else
    padding: ($islands_xs + 2px) ($islands_m - 1px)
    font-size: 18px
    line-height: $height - (2*$islands_xs + 4px)

  background: $color
  white-space: nowrap

  margin-right: round(($height / 2) * tan(30deg), 3)

skin-islands-arrow__helper($this)
  pseudo-with-content()

  +cache()
    position: absolute
    left: 100%

    if ie
      top: 0
      height: 0

      border-style: dashed solid
    else
      top: 50%

      transform: translate(-50%,-50%) scale(0.5,1) rotate(-135deg)

  $height = $this.units[0] or $this['parent']['units'][0] or $skin-islands-arrow-height
  $color = $this.colors[0] or $this['parent']['colors'][0] or $skin-islands-arrow-color
  +cache($height $color)
    if ie
      border-color: transparent $color
      border-width: ($height / 2) 0 ($height / 2) (round(($height / 2) * tan(30deg), 3))
    else
      $sqrt2 = 1.414213562
      width: $height * (1/$sqrt2)
      height: $height * (1/$sqrt2)

      background: linear-gradient(45deg, $color 50%,transparent 50%)

      if alpha($color) == 1
        -webkit-transform: translate(-50%,-50%) scale(0.5,1) rotate(-135deg) translateZ(0)
